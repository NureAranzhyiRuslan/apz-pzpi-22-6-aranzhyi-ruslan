МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ

ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ
УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ




Лабораторна робота №2


з дисципліни
«Архітектура програмного забезпечення»











Харків 2025
1 ІСТОРІЯ ЗМІН
Зміни звіту наведені у таблиці 1.1.
Таблиця 1.1 - Історія змін
№	Дата	Версія звіту	Опис змін
1	27.04.2025	0.1	Створено розділ “Історія змін”
2	27.04.2025	0.1	Створено розділ “Завдання”
3	27.04.2025	0.1	Створено розділ “Опис виконаної роботи”
4	27.04.2025	0.1	Створено розділ “Висновки”
5	28.04.2025	0.1	Доданий Додаток А


2 ЗАВДАННЯ
Потрібно розробити серверну / back-end частину програмної системи.
Проаналізуйте завдання (додаток В).
Виконайте контрольні завдання.
Відкрийте створений на попередній лабораторній роботі репозиторій GitHub.
Створіть у репозиторії директорію Task2 та текстовий файл з описом інженерних рішень у цій частині проєкту.
Зафіксуйте кожну внесену зміну командою git commit з відповідним коментарем та фіксуйте цією командою усі наступні зміни у проєкті.
Створіть у директорії Task2 піддиректорію для програмного коду.
Створіть програмний код, завантажте його у створену піддиректорію, зафіксуйте внесені у репозиторій зміни. Виконайте функціональне тестування створеного програмного коду та створіть відеозапис цього тестування тривалістю 7-10 хвилин з усними поясненнями процесу тестування.
Завантажте створений відеозапис тестування YouTube канал для вашого облікового запису в домені @nure.ua
Створіть для завантаженого запису його хронологічний опис.
Оформіть звіт у форматі pdf та завантажте його на навчальну платформу https://dl.nure.ua/
У коментарях до завантаженого звіту вкажіть посилання на відеозапис тестування у вашому каналі YouTube.


3 ОПИС ВИКОНАНОЇ РОБОТИ
Програмна система має клієнт-серверну архітектуру. Серверна частина реалізована за допомогою фреймворку FastAPI на мові програмування Python. Для збереження даних використовується база даних MariaDB. Автентифікація користувачів відбувається через JWT токени.
Серверна частина складається з наступних модулів:
1. Авторизація: вхід та реєстрація користувачів;
2. Керування профілями користувачів: перегляд та редагування інформації користувачів;
3. Керування користувацькими IoT-сенсорами: додавання, редагування, перегляд та видалення системних та користувацьких IoT-серсорів;
4. Сбір даних з IoT-серсорів: отримання та обробка погодних даних з  IoT-пристроїв;
5. Прогнозування погоди: отримання прогнозва погоди для конкретного міста або IoT-сенсера;
6. Адміністрування: перегляд, редагування та видалення інформації про користувачів,  IoT-серсори та погодні виміри.
На рисунках 1-4 наведені UML діаграми прецедентів.


Рисунок 1 - UML діаграму прецедентів взаємодії адміністратора з системою

Рисунок 2 - UML діаграма прецедентів взаємодії користувачів з системою

Рисунок 3 - UML діаграма прецедентів взаємодії IoT-пристою з системою

На рисунку 4 наведена діаграма розгортання.

Рисунок 4 - UML діаграма розгортання

На рисунку 5 наведена діаграмма компонентів.

Рисунок 5 - UML діаграма компонентів

На рисунку 6 наведена ER-діаграма.

Рисунок 6 - ER діаграма даних

Опис бази даних програмної системи описаний в таблицях 1-6.

Таблиця 1 - Таблиця бази даних “users”
id	BIGINT PRIMARY KEY
first_name	VARCHAR(128)
last_name	VARCHAR(128)
email	VARCHAR(256)
password	VARCHAR(255)
role	SMALLINT
locale	SMALLINT
temperature_units	SMALLINT

Таблиця 2 - Таблиця бази даних “sessions”
id	BIGINT PRIMARY KEY
user_id	BIGINT
nonce	VARCHAR(16)
created_at	DATETIME

Таблиця 3 - Таблиця бази даних “cities”
id	BIGINT PRIMARY KEY
name	VARCHAR(128)
latitude	DOUBLE
longitude	DOUBLE

Таблиця 4 - Таблиця бази даних “sensors”
id	BIGINT PRIMARY KEY
user_id	BIGINT
api_key_part	VARCHAR(32)
city_id	BIGINT
name	VARCHAR(64)

Таблиця 5 - Таблиця бази даних “measurements”
id	BIGINT PRIMARY KEY
sensor_id	BIGINT
temperature	DOUBLE
pressure	DOUBLE
timestamp	DATETIME

Таблиця 6 - Таблиця бази даних “forecasts”
id	BIGINT PRIMARY KEY
city_id	BIGINT
timestamp	DATETIME
temperature	DOUBLE
info_text	VARCHAR(128)
На таблиці 7 наведена прецифікація REST API.

Таблиця 7 - Специфікація API
POST	/auth/register	Регістрація користувачів
POST	/auth/login	Авторизація користувачів
POST	/auth/logout	Вихід користувачів з аккаунту
GET	/user/info	Запит інформації користувача
PATCH	/user/info	Редагування інформації користувача
GET	/sensors	Запит IoT-пристроїв користувача
POST	/sensors	Додавання нового IoT-пристрою користувача
GET	/sensors/{sensor_id}	Запит інформації про IoT-пристрій користувача
PATCH	/sensors/{sensor_id}	Редагування інформації про IoT-пристрій користувача
DELETE	/sensors/{sensor_id}	Видалення IoT-пристрою користувача
POST	/measurements	Відправка погодних даних з IoT-пристрою
GET	/measurements/{sensor_id}	Запит погодних даних з конкретного IoT-пристрою
POST	/forecast/{sensor_id}	Запит прогнозу погоди з конкретного IoT-пристрою
GET	/forecast/city	Запит прогнозу погоди для міста
GET	/admin/cities	Запит інформації про міста
POST	/admin/cities	Додавання нового міста
PATCH	/admin/cities/{city_id}	Редагування міста
DELETE	/admin/cities/{city_id}	Видалення міста
GET	/admin/users	Запит інформації про користувачів
GET	/admin/users/{user_id}	Запит інформації про користувача
DELETE	/admin/users/{user_id}	Видалення користувача
GET	/admin/users/{user_id}/sensors	Запит IoT-пристроїв користувача
GET	/admin/sensors	Запит інформації про IoT-пристрої
GET	/admin/sensors/{sensor_id}	Запит інформації про IoT-пристрої
DELETE	/admin/sensors/{sensor_id}	Видалення IoT-пристрою
GET	/admin/sensors/{sensor_id}/measurements	Запит погодних вимірювань IoT-пристрою
GET	/admin/measurements	Запит інформації про погодні вимірювання
GET	/admin/measurements/{measurement_id}	Запит інформації про погодне вимірювання
DELETE	/admin/measurements/{measurement_id}	Видалення погодного вимірювання


4 ВИСНОВКИ
Під час виконання лабораторної роботи було роброблено серверну частину програмної системи.


Додаток А
Посилання на відео та хронологічний опис

Відеозапис доповіді на YouTube: https://youtu.be/e9GTfEK9TmE
Хронологічний опис доповіді:
00:00 Вступ
00:12 Схема база даних
00:25 Авторизація
01:12 Запит та редагування інформації про користувача
01:40 Запит пристроїв користувача
01:52 Додавання та перегляд міст
02:08 Створення та редагування пристроїв користувача
02:48 Додавання та перегляд вимірювань для пристрою
03:22 Адміністрування: міста
04:02 Адміністрування: користувачі
04:55 Адміністрування: пристрої
05:50 Адміністрування: вимірювання
